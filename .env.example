# Vast SSH
VAST_HOST=ssh7.vast.ai
VAST_PORT=17568
VAST_USER=root
# VAST_SSH_KEY=/path/to/private/key
# GitHub SSH (huihuang)
# GITHUB_SSH_KEY=~/.ssh/id_huihuang2github

# Control plane mode:
# external -> Temporal/MinIO on huihuang via NAT/public forwarding
# local    -> start Temporal/MinIO inside instance (rollback mode)
CONTROL_PLANE_MODE=external
# Entry-point fallback guard:
# false -> require supervisor backend; prevent duplicate process trees
# true  -> allow fallback to entrypoint startup path (emergency rollback only)
ALLOW_ENTRYPOINT_FALLBACK=false

# External control plane endpoints (Phase C / NAT)
TEMPORAL_ADDRESS=64.229.113.233:7233
MINIO_ENDPOINT=64.229.113.233:9000
MINIO_SECURE=false
MINIO_ACCESS_KEY=change-me
MINIO_SECRET_KEY=change-me
REINDEX_URL=http://64.229.113.233:8000/admin/reindex

# Queue and active-instance scheduler defaults
BASE_TASK_QUEUE=video-processing
SCHEDULER_ACTIVE_INSTANCE=true
SCHEDULER_ACTIVE_MAX_PARALLELISM=2
# API role:
# control -> workflow trigger/management endpoint role (huihuang default)
# compute -> compute-side health/inference endpoint role (GPU supervisor sets this)
API_ROLE=control
# Optional worker identity override (default: hostname)
# WORKER_INSTANCE_NAME=vast-instance-1

# Runtime profile selection for shared compute image
# cres  -> run code bundled in this image (/workspace)
# ledge -> run ledge compute code from /workspace/ledge-repo
PROJECT_PROFILE=cres
PROJECT_ROOT=/workspace

# Optional ledge auto-bootstrap when PROJECT_PROFILE=ledge and PROJECT_ROOT is missing
# Use SSH bootstrap
# LEDGE_REPO_URL=git@github.com:jianshelu/ledge-repo.git
# LEDGE_REPO_REF=main
# LEDGE_GIT_SSH_KEY_PATH=/root/.ssh/id_huihuang2github
# or HTTPS token bootstrap (private repo)
# LEDGE_GITHUB_USER=x-access-token
# LEDGE_GITHUB_TOKEN=ghp_xxx

# Transcript quality gate for batch combined artifacts (skip degenerate transcripts)
# TRANSCRIPT_MIN_CHARS=80

# Optional for public object links
# MINIO_PUBLIC_BASE_URL=http://64.229.113.233:9000
